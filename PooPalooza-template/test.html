<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>衛教</title>

  <!-- Favicons -->
  <link href="images/icon.png" rel="icon">
  <link href="images/icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <style>
    #calendar {
      margin: 0 auto;
      max-width: 900px;
      background-color: #ffffff;
      border-radius: 6px;
      box-shadow: 0 1px 2px #c3c3c3;
    }

    .login-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 20px;
    }
  </style>
</head>

<body>

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center">
      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <img src="images/icon.png" alt="">
        <h1 class="sitename">PooPalooza</h1>
      </a>
      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html#hero" class="active">主頁</a></li>
          <li class="dropdown">
            <a href="#"><span>功能</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#map">廁所地圖</a></li>
              <li><a href="#education">衛教</a></li>
              <li><a href="#aboutus">關於我們</a></li>
            </ul>
          </li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
      <a class="btn-getstarted" href="#login">登入</a>
      <a class="btn-getstarted" href="#register">註冊</a>
    </div>
  </header>

  <script src="//cdn.amcharts.com/lib/5/index.js"></script>
  <script src="//cdn.amcharts.com/lib/5/hierarchy.js"></script>
  <script src="//cdn.amcharts.com/lib/5/themes/Animated.js"></script>
  <div id="chartdiv"></div>
  <dialog id="dialog1">
    <!-- content -->
    <button style="position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    background: transparent;
    border: none;
    cursor: pointer;
    color: #000;" aria-label="Close modal" class="buttonCloseX">✖</button>
    
    <h1>Modal message here</h1>
    <p>Are you sure to confirm this action?</p>
    <div style="text-align: center;">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/PBDrCgS7E2k?si=y0Ttvc_TGMvLlxke" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>    
    <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
      <button class="buttonOk" style="border: 2px solid black; background-color: white; color: black; height:40px;">Confirm</button>
      <button class="buttonClose" style="border: 2px solid black; background-color: white; color: black;">Close</button>      
    </div>
  </dialog>
  
  <div id="itemContainer"></div>
  
  
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // 所有的dialog
      const dialogs = document.querySelectorAll("dialog");
  
      dialogs.forEach(dialog => {
        // 關閉按鈕（X）
        const buttonCloseX = dialog.querySelector(".buttonCloseX");
        if (buttonCloseX) {
          buttonCloseX.addEventListener("click", () => {
            dialog.close();
            document.getElementById("result").textContent = ``;
          });
        }
  
        // 關閉按鈕（Close）
        const buttonClose = dialog.querySelector(".buttonClose");
        if (buttonClose) {
          buttonClose.addEventListener("click", () => {
            dialog.close();
            document.getElementById("result").textContent = ``;
          });
        }
  
        // 確認按鈕（Confirm）
        const buttonOk = dialog.querySelector(".buttonOk");
        if (buttonOk) {
          buttonOk.addEventListener("click", () => {
            dialog.close();
            document.getElementById("result").textContent = ``;
          });
        }
      });
  
      // 開啟對話框的通用功能
      function openDialog(dialogId) {
        const dialog = document.getElementById(dialogId);
        if (dialog) {
          if (typeof dialog.showModal === "function") {
            dialog.showModal();
          } else {
            alert("The dialog HTML5 API is not supported by this browser.");
          }
        } else {
          console.error(`Dialog with ID "${dialogId}" not found.`);
        }
      }
  
  
      // 渲染按鈕
      const container = document.getElementById("itemContainer");
      items.forEach((item) => {
        const button = document.createElement("button");
        button.textContent = item.name;
        button.addEventListener("click", () => openDialog(item.dialogId));
        container.appendChild(button);
      });
    });
  </script>
  
  </dialog>
<script>
  // 通用的 openDialog 函數
function openDialog(dialogId) {
  const dialog = document.getElementById(dialogId);
  if (dialog) {
    if (typeof dialog.showModal === "function") {
      dialog.showModal();
    } else {
      alert("Dialog API is not supported by this browser.");
    }
  } else {
    console.error(`Dialog with ID "${dialogId}" not found.`);
  }
}

// 通用的 closeDialog 函數（如果需要）
function closeDialog(dialogId) {
  const dialog = document.getElementById(dialogId);
  if (dialog) {
    dialog.close();
  }
}

// 動態渲染 UI 並綁定事件
document.addEventListener("DOMContentLoaded", () => {
  const container = document.getElementById("itemContainer"); // 假設有一個容器

  items.forEach((item) => {
    // 創建 DOM 元素
    const itemElement = document.createElement("div");
    itemElement.classList.add("item");
    itemElement.innerHTML = `
      <img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px;">
      <span>${item.name} (Value: ${item.value})</span>
      <button class="openDialogButton">Learn More</button>
    `;

    // 綁定按鈕的點擊事件
    const button = itemElement.querySelector(".openDialogButton");
    button.addEventListener("click", item.onClick);

    container.appendChild(itemElement);
  });

  // 綁定所有對話框的關閉按鈕
  const closeButtons = document.querySelectorAll(".buttonClose");
  closeButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const dialog = button.closest("dialog");
      if (dialog) {
        dialog.close();
      }
    });
  });
});
</script>

  <div id="result">Result: N/A</div>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }

    #chartdiv {
      width: 100%;
      height: 850px;
    }
  </style>
  <script>
    var data = [{
    //name: "大便POOP",
    value: 60,
    image: "images/education-poop.png",
    children: [
      {
        name: "飲食",
        value: 30,
        image: "images/education-food.png",
        children: [
          {
            name: "幫助排便食物",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png",
            onClick: function() {
            openDialog("dialog1"); // 開啟對話框
          }
          },
          {
            name: "IoT",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "O2O Integration",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Project Management",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Test-fit Management",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          }
        ]
      },{
        name: "大便知識",
        value: 30,
        image: "images/education-poop.png",
        children: [
        {
          name: "顏色&形狀",
          value: 20,
          image: "https://img.icons8.com/flat-round/344/pinguin--v1.png",
          onClick: function() {
            openDialog(); // 開啟對話框
          }
        },
          {
            name: "IoT",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "O2O Integration",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Project Management",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Test-fit Management",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          }
        ]
      },

      {
        name: "運動",
        value: 30,
        image: "images/education-exercise.png",
        children: [
          {
            name: "PWA",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Ream-time Tracking",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Mobile App",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          }
        ]
      },
      {
        name: "情緒",
        value: 30,
        image: "images/education-emotion.png",
        children: [
          {
            name: "Payments",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "E-Signature",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Digital Wallet",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Blockchain",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          }
        ]
      },
      {
        name: "疾病",
        value: 30,
        image: "images/education-disease.png",
        children: [
          {
            name: "Workflow",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Budget Management",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "RPA",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "CRM",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "DMS",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          },
          {
            name: "Scheduling",
            value: 20,
            image: "https://img.icons8.com/flat-round/344/pinguin--v1.png"
          }
        ]
      }
    ]
  }];

  // Create root and chart
  var root = am5.Root.new("chartdiv");

  root.setThemes([
    am5themes_Animated.new(root)
  ]);

  var container = root.container.children.push(
    am5.Container.new(root, {
      width: am5.percent(100),
      height: am5.percent(100),
      layout: root.verticalLayout
    })
  );

  var series = container.children.push(
    am5hierarchy.ForceDirected.new(root, {
      downDepth: 1,
      initialDepth: 1,
      valueField: "value",
      categoryField: "name",
      childDataField: "children",
      minRadius: 20,
      maxRadius: 60,
      centerStrength: 0.5,
      manyBodyStrength: -1,
      nodePadding: 40
    })
  );

  // Set up labels
  series.labels.template.setAll({
    fill: am5.color(0x000000),
    y: 45,
    // y: am5.percent(10),
    oversizedBehavior: "none"
  });
// 節點樣式設置
series.nodes.template.setup = function(target) {
  target.events.on("dataitemchanged", function(ev) {
    var context = ev.target.dataItem.dataContext;

    // 設置圖片
    target.children.push(am5.Picture.new(root, {
      width: 40,
      height: 40,
      centerX: am5.percent(50),
      centerY: am5.percent(50),
      src: context.image
    }));

    // 添加點擊事件
    target.events.on("click", function() {
      if (context.onClick) {
        context.onClick(); // 執行自定義點擊事件
      }
    });
  });
};

// 將資料設置到圖表
series.data.setAll(data);
series.set("selectedDataItem", series.dataItems[0]);
  </script>
</body>

</html>
